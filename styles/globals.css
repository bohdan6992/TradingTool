@tailwind base;
@tailwind components;
@tailwind utilities;

/* safety-—É—Ç–∏–ª—ñ—Ç–∞ */
@layer utilities { .tt-grid { display: grid; } }

/* ============ BASE ============ */
@layer base {
  :root {
    --bg: #0b0f1a;
    --fg: #e6edf6;
    --muted: #93a1be;
    --color-primary: #60a5fa;

    /* –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è */
    --base-width: 1920; /* –±–∞–∑–æ–≤–∞ —à–∏—Ä–∏–Ω–∞ –ø–æ–ª–æ—Ç–Ω–∞ */
    --scale: 1;         /* –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è —Ö—É–∫–æ–º */
    --offsetX: 0px;     /* –∑—Å—É–≤ –ø–æ–ª–æ—Ç–Ω–∞ –ø–æ X –¥–ª—è —Ü–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è */

    /* topbar */
    --topbar-h: 72;     /* –±–∞–∑–æ–≤–∞ –≤–∏—Å–æ—Ç–∞ —Ç–æ–ø–±–∞—Ä–∞ –≤ px (–±–µ–∑ scale). –ü—ñ–¥–∂–µ–Ω–∏ –ø—ñ–¥ —Ñ–∞–∫—Ç–∏—á–Ω—É */
  }

  html, body { height: 100%; }

  body { @apply bg-white text-slate-900 dark:bg-[var(--bg)] dark:text-slate-100; }

  a { @apply text-inherit no-underline; }
  a:hover { @apply underline decoration-1 decoration-white/40 dark:decoration-white/30; }
}

/* ============ COMPONENTS ============ */
@layer components {
  .card { @apply rounded-2xl border border-white/10 bg-white/70 dark:bg-white/5 backdrop-blur-md; }
  .btn  { @apply px-4 py-2 rounded-xl font-semibold border border-white/20 transition text-slate-900 dark:text-slate-100 bg-white/70 dark:bg-white/5; }
  .btn:hover {
    box-shadow:
      0 8px 24px -12px rgba(0,0,0,.35),
      0 0 0 1px rgba(255,255,255,.08),
      0 0 0 3px color-mix(in oklab, var(--color-primary) 25%, transparent);
  }
  .hero-title { @apply text-4xl md:text-6xl font-extrabold tracking-tight; }
  .hero-sub   { @apply text-slate-600 dark:text-slate-300; }
  .grid-auto  { @apply grid gap-4 sm:grid-cols-2 lg:grid-cols-3; }
  .small      { @apply text-xs text-slate-500 dark:text-slate-400; }

  /* —Ç–∞–±–ª–∏—Ü—ñ ‚Äî –ª–∏—à–µ –≤ .tt-table */
  .tt-table table { @apply w-full text-sm; }
  .tt-table th, .tt-table td { @apply text-left px-2 py-2; }
  .tt-table thead tr { @apply border-b border-white/10; }
  .tt-table tbody tr { @apply border-b border-white/10; }
}

/* ============ UTILITIES ============ */
@layer utilities {
  .shadow-glow {
    box-shadow:
      0 8px 24px -12px rgba(0,0,0,.35),
      0 0 0 1px rgba(255,255,255,.08),
      0 0 0 3px color-mix(in oklab, var(--color-primary) 25%, transparent);
  }
}

/* ============================= */
/* üì± –ú–æ–±—ñ–ª—å–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –±–µ–∑ –ø–µ—Ä–µ–±—É–¥–æ–≤–∏ */
/* ============================= */

html, body {
  width: 100%;
  height: 100%;
  margin: 0; padding: 0;
  overflow-x: hidden;
  overscroll-behavior: none;
}

/* –ú–∞—Å—à—Ç–∞–±—É—î–º–æ –õ–ò–®–ï –≤–Ω—É—Ç—Ä—ñ—à–Ω—é –æ–±–≥–æ—Ä—Ç–∫—É (#app-scale).
   –•—É–∫ –≤–∏—Å—Ç–∞–≤–ª—è—î transform, –∞–ª–µ –¥–∞—î–º–æ fallback –Ω–∞ –∑–º—ñ–Ω–Ω—ñ */
#app-scale {
  width: calc(var(--base-width) * 1px);
  transform-origin: top left;
  transform: translateX(var(--offsetX)) scale(var(--scale));
  will-change: transform;
}

/* ===== Stable scaling utils (anti-jitter) ===== */
.card, .nav, .tabs, .topbar, .clock, .strategy-tabs {
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* –Ω–µ –¥–æ–∑–≤–æ–ª—è—î–º–æ –ø–µ—Ä–µ–Ω–æ—Å –ø—É–Ω–∫—Ç—ñ–≤ –º–µ–Ω—é/—Ç–∞–±–∏/–∫–Ω–æ–ø–∫–∏ –≤ –∫—ñ–ª—å–∫–∞ —Ä—è–¥–∫—ñ–≤ */
.nowrap { white-space: nowrap; }
.nowrap > * { flex: 0 0 auto; } /* flex-none */

/* —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω—ñ —Ü–∏—Ñ—Ä–∏ –¥–ª—è –≥–æ–¥–∏–Ω–Ω–∏–∫–∞ */
.tabular-nums { font-variant-numeric: tabular-nums; }

/* ============ TopBar scaling (–º—ñ–Ω—ñ–º—É–º –ª–æ–≥—ñ–∫–∏ —Ç—É—Ç) ============ */
/* —Å–∞–º topbar ‚Äì fixed; –≤–∏–¥–∏–º–∞ –≤–∏—Å–æ—Ç–∞ = –±–∞–∑–æ–≤–∞ * scale */
.tt-topbar {
  position: fixed !important;
  top: 0; left: 0; right: 0;
  z-index: 1000;
  height: calc(var(--topbar-h) * var(--scale));

  /* –í–ê–ñ–õ–ò–í–û: –∂–æ–¥–Ω–∏—Ö –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –≤—ñ–¥—Å—Ç—É–ø—ñ–≤ —ñ –ø–∞–¥—ñ–Ω–≥—ñ–≤ —Ç—É—Ç */
  padding: 0;
  margin: 0;
}

/* –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–∞ ‚Äú—Å—Ü–µ–Ω–∞‚Äù –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ç–æ–ø–±–∞—Ä–∞ ‚Äì —Ü–µ–Ω—Ç—Ä–æ–≤–∞–Ω–∞ —è–∫ –ø–æ–ª–æ—Ç–Ω–æ */
.tt-topbar-viewport {
  width: calc(var(--base-width) * 1px);
  transform-origin: top left;
  transform: translateX(var(--offsetX)) scale(var(--scale));
}

/* –≤–Ω—É—Ç—Ä—ñ—à–Ω—è —Å—ñ—Ç–∫–∞ —Ç–æ–ø–±–∞—Ä–∞:
   —Ñ—ñ–∫—Å—É—î–º–æ –±–∞–∑–æ–≤—É –≤–∏—Å–æ—Ç—É –±–µ–∑ scale ‚Äî —â–æ–± spacer –∑–±—ñ–≥–∞–≤—Å—è –∑ —Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—é */
.tt-topbar-inner {
  width: 100%;
  max-width: none;
  padding: 0 20px;
  height: calc(var(--topbar-h) * 1px); /* ‚Üê –∫–ª—é—á–æ–≤–∞ –ª—ñ–Ω—ñ—è */
}

/* —Å–ø–µ–π—Å–µ—Ä –ø—ñ–¥ —Ç–æ–ø–±–∞—Ä (—â–æ–± –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ —ó—Ö–∞–≤ –ø—ñ–¥ –Ω—å–æ–≥–æ) */
.tt-topbar-spacer { height: calc(var(--topbar-h) * var(--scale)); }

/* ============ Zoom-mode overrides ============ */
.zoom-mode .container,
.zoom-mode [class*="max-w-"] { max-width: none !important; }

/* –∫–ª—é—á–æ–≤—ñ –æ–±–≥–æ—Ä—Ç–∫–∏ –º–∞—é—Ç—å —à–∏—Ä–∏–Ω—É –ø–æ–ª–æ—Ç–Ω–∞ */
.zoom-mode .tt-topbar-inner,
.zoom-mode .page,
.zoom-mode .content,
.zoom-mode .wrap,
.zoom-mode .nytopbar__grid {
  width: calc(var(--base-width) * 1px) !important;
  margin-left: auto; margin-right: auto;
}

/* –≥–æ–ª–æ–≤–Ω–∏–π main ‚Äî –ø–æ–≤–Ω–∞ —à–∏—Ä–∏–Ω–∞ –ø–æ–ª–æ—Ç–Ω–∞ */
.zoom-mode main {
  max-width: none !important;
  width: calc(var(--base-width) * 1px) !important;
  margin-left: auto; margin-right: auto;
  padding-left: 0; padding-right: 0;
}

/* –∫–æ–º–ø–µ–Ω—Å—É—î–º–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –≤—ñ–¥—Å—Ç—É–ø–∏ —Å–µ–∫—Ü—ñ–π —É—Å–µ—Ä–µ–¥–∏–Ω—ñ main */
.zoom-mode main > section { padding-left: 20px; padding-right: 20px; }

/* –Ω–∞ –≤–∏–ø–∞–¥–æ–∫ –ª–æ–∫–∞–ª—å–Ω–∏—Ö overflow, —â–æ –æ–±—Ä—ñ–∑–∞—é—Ç—å –º–∞—Å—à—Ç–∞–± */
.zoom-mode * { overflow: visible; }

/* –†—è–¥–æ–∫, —è–∫–∏–π –ù–Ü–ö–û–õ–ò –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è */
.tt-row-nowrap {
  display: flex;
  gap: 16px;
  align-items: stretch;
  flex-wrap: nowrap;
}
.tt-row-nowrap > * { flex: 0 0 auto; }

/* Grid —ñ–∑ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∫–æ–ª–æ–Ω–æ–∫ */
.tt-grid-solid-2 { display:grid; grid-template-columns: repeat(2, 1fr); gap:16px; }
.tt-grid-solid-3 { display:grid; grid-template-columns: repeat(3, 1fr); gap:16px; }
.tt-grid-solid-4 { display:grid; grid-template-columns: repeat(4, 1fr); gap:16px; }

/* –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —à–∏—Ä–∏–Ω–∞ –∞–π—Ç–µ–º—ñ–≤ */
.tt-grid-min-320 { display:grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap:16px; }

/* –ù–∞ –≤–∏–ø–∞–¥–æ–∫ –∑–∞–ª–∏—à–∫–æ–≤–∏—Ö –æ–±–º–µ–∂–µ–Ω—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ ‚Äî –∑–Ω—ñ–º–∞—î–º–æ max-width —É zoom-—Ä–µ–∂–∏–º—ñ */
.zoom-mode [class*="max-w-"] { max-width: none !important; }

/* ============================================= */
/* üì± +50% —Ä–æ–∑–º—ñ—Ä—ñ–≤ –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö (‚â§768px)        */
/* ============================================= */
@media (max-width: 768px) {
  /* –ë–∞–∑–æ–≤–∏–π —à—Ä–∏—Ñ—Ç ‚Äî —É—Å–µ, —â–æ –≤ rem/em, –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è */
  html { font-size: 150%; }

  /* –¢–µ–∫—Å—Ç–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ */
  p, span, a, label, input, select, textarea {
    font-size: 1.1em;
    line-height: 1.4;
  }

  /* –ö–Ω–æ–ø–∫–∏ / –ø—ñ–ª–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó */
  .tt-btn,
  .tt-pill,
  button {
    font-size: 1.3em !important;
    min-height: 48px !important;
    padding: 0.75em 1.5em !important;
    border-radius: 16px !important;
  }

  .tt-dd > .tt-btn {
    font-size: 1.3em !important;
    padding: 0.75em 1.3em !important;
  }

  .tt-nav { gap: 10px; padding: 8px; }
  .tt-pill { height: 44px !important; padding: 0 20px !important; }

  /* –¢–æ–ø–±–∞—Ä: –∑–±—ñ–ª—å—à–∏–º–æ ‚Äú–≤–Ω—É—Ç—Ä—ñ—à–Ω—é‚Äù –±–∞–∑–æ–≤—É –≤–∏—Å–æ—Ç—É —É –ø—ñ–∫—Å–µ–ª—è—Ö */
  .tt-topbar-inner {
    height: calc(var(--topbar-h) * 1px * 1.2); /* +20% –¥–æ –±–∞–∑–æ–≤–æ—ó –≤–∏—Å–æ—Ç–∏ */
    padding: 0 18px;
    gap: 10px;
  }
  .tt-brand-txt { font-size: 1.5em; }
  .tt-logo-img { height: 56px !important; }

  /* –ü–ª–∏—Ç–∫–∏/–∫–∞—Ä—Ç–∏ */
  .surface, .rounded-3xl { border-radius: 24px !important; }

  /* –Ü–Ω–ø—É—Ç–∏ */
  input.inp, .inp {
    height: 52px !important;
    font-size: 1.2em !important;
  }
  .tt-btn.pretty {
    height: 52px !important;
    font-size: 1.2em !important;
  }

  /* –†—è–¥–∫–∏ —É —Å–ø–∏—Å–∫–∞—Ö */
  .topGrid .row,
  .rlist .row {
    padding: 16px 20px !important;
  }
  .ticker { font-size: 1.2em !important; }
  .value  { font-size: 1.1em !important; padding: 8px 14px !important; }
}
